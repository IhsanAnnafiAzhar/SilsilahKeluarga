apply plugin: 'com.android.application'

def fileChiavi = rootProject.file("chiavi.properties")
def chiave

android {
	if( fileChiavi.exists() ) {
		chiave = new Properties()
		chiave.load(new FileInputStream(fileChiavi))
		signingConfigs {
			configa {
				keyAlias chiave['keyAlias']
				keyPassword chiave['keyPassword']
				storeFile file(chiave['storeFile'])
				storePassword chiave['storePassword']
			}
		}
	}
	compileSdkVersion 33
	defaultConfig {
		applicationId "app.familygem"
		minSdkVersion 19
		targetSdkVersion 33
		versionCode 24
		versionName '0.9.2.5'
		vectorDrawables.useSupportLibrary = true
		resConfigs 'ar', 'ckb', 'cs', 'da', 'de', 'en', 'eo', 'es', 'fa', 'fr', 'hr', 'hu', 'in', 'it', 'iw', 'kn', 'mr', 'nb', 'nl', 'pl', 'pt', 'ru', 'sk', 'sl', 'sr', 'ti', 'tr', 'uk', 'zh'
		def passKey = ""
		def utenteAruba = ""
		def passwordAruba = ""
		def utenteGeoNames = "demo"
		if (chiave) {
			passKey = chiave['passKey']
			utenteAruba = chiave['utenteAruba']
			passwordAruba = chiave['passwordAruba']
			utenteGeoNames = chiave['utenteGeoNames']
		}
		buildConfigField "String", "PASS_KEY", "\""+passKey+"\""
		buildConfigField "String", "utenteAruba", "\""+utenteAruba+"\""
		buildConfigField "String", "passwordAruba", "\""+passwordAruba+"\""
		buildConfigField "String", "utenteGeoNames", "\""+utenteGeoNames+"\""
		testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
		multiDexEnabled true
	}
	buildTypes {
		debug {
			pseudoLocalesEnabled true
			if (chiave)
				signingConfig signingConfigs.configa
		}
		release {
			shrinkResources true
			minifyEnabled true
			proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
			if (chiave)
				signingConfig signingConfigs.configa
		}
	}
	compileOptions {
		sourceCompatibility JavaVersion.VERSION_1_8
		targetCompatibility JavaVersion.VERSION_1_8
	}
	packagingOptions {
		resources {
			excludes += ['**/*.properties', 'META-INF/*.md', 'META-INF/*.xml']
			pickFirsts += ['EventFact*.properties']
		}
	}
	namespace 'app.familygem'
}

dependencies {
	implementation 'androidx.multidex:multidex:2.0.1'
	implementation 'commons-io:commons-io:2.8.0' // Versions from 2.9.0 to 2.11.0 give NoClassDefFoundError on old devices
	implementation 'com.google.code.gson:gson:2.10'
	implementation 'commons-net:commons-net:3.8.0'
	implementation 'androidx.lifecycle:lifecycle-process:2.5.1'
	implementation 'org.familysearch.gedcom:gedcom:1.14.0'
	implementation 'androidx.work:work-runtime:2.8.0'
	implementation 'androidx.appcompat:appcompat:1.7.0-alpha01'
	implementation 'com.android.installreferrer:installreferrer:2.2'
	implementation 'com.google.android.material:material:1.8.0'
	implementation 'com.google.android.flexbox:flexbox:3.0.0'
	implementation files('libs/gedcomgraph-3.2.jar')
	implementation 'joda-time:joda-time:2.12.1'
	implementation 'com.theartofdev.edmodo:android-image-cropper:2.8.0'
	implementation 'com.otaliastudios:zoomlayout:1.9.0'
	implementation 'com.github.AndroidDeveloperLB:FastScrollerAndRecyclerViewFixes:9'
	implementation 'org.jsoup:jsoup:1.15.3'
	implementation files('libs/geonames-1.1.14.jar')
	implementation 'com.squareup.picasso:picasso:2.71828'
	implementation 'jp.wasabeef:picasso-transformations:2.2.1'
	implementation 'org.jdom:jdom:1.1.3' // Don't update to version 2.x for compatibility with GeoNames
	implementation 'com.android.billingclient:billing:5.1.0'
	//androidTestImplementation 'androidx.test:runner:1.4.0'
}
